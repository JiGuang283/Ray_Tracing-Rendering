# 点光源
在main.cpp中，把`scene_id`设置为15
```cpp
int main(int argc, char *args[]) {

    int scene_id = 15;//这里
    if (argc > 1) {
        scene_id = std::atoi(args[1]);
    }
```
在scenes.cpp中，取消注释`SceneConfig select_scene(int scene_id)`中`case 15`的`1. 测试点光源 (Point Light)`部分
```cpp
    case 15:
        config.world = point_light_scene();
        config.aspect_ratio = 16.0 / 9.0;
        config.image_width = 800;
        config.samples_per_pixel = 100;
        config.background = color(0.0, 0.0, 0.0);
        config.lookfrom = point3(0, 5, 10);
        config.lookat = point3(0, 1, 0);
        config.vfov = 30.0;
        //1. 测试点光源 (Point Light) - 取消注释来测试
        config.lights.push_back(
            make_shared<PointLight>(point3(0, 6, 2), color(50, 50, 50)));
        // 2. 测试平行光 (Directional Light) - 取消注释来测试
         //config.lights.push_back(
         //   make_shared<DirectionalLight>(vec3(-1, -1, -1), color(5, 5, 5)));

        // 3. 测试聚光灯 (Spot Light) - 下一步要做的
        //config.lights.push_back(
        //    make_shared<SpotLight>(point3(0, 6, 2), vec3(0, -1, 0), 30.0, color(500, 500, 500)));
        break;
```
`config.samples_per_pixel = 100;`这里，调大数值可显著提升图像质量，但渲染时间变长。调小数值反之。这对后面的所有光源效果都适用。


效果为
![](/img/点光源.png)

---

# 平行光
在main.cpp中，把`scene_id`设置为15。在scenes.cpp中，取消注释`SceneConfig select_scene(int scene_id)`中`case 15`的`2. 测试平行光 (Directional Light)`部分

效果为
![](/img/平行光.png)

---

# 聚光灯
在main.cpp中，把`scene_id`设置为15。在scenes.cpp中，取消注释`SceneConfig select_scene(int scene_id)`中`case 15`的`3. 测试聚光灯 (Spot Light)`部分

效果为
![](/img/聚光灯.png)

---

# 环境光(IBL)

在main.cpp中，把`scene_id`设置为17。 在scenes.cpp中
```cpp
    case 17: {// IBL 测试
        config.world = pbr_materials_gallery(); // 用材质球场景来看反光效果
        config.aspect_ratio = 16.0 / 9.0;
        config.image_width = 800;
        config.samples_per_pixel = 1000;
        config.background = color(0, 0, 0); // 背景设为黑，完全由 EnvMap 提供
        config.lookfrom = point3(0, 5, 15);
        config.lookat = point3(0, 1, 0);

        // 添加环境光
        auto env_light = make_shared<EnvironmentLight>("sky.hdr");
        config.lights.push_back(env_light);

        // ★重要★: 环境光既是光源，也是背景。
        // 你需要修改 main.cpp 或 integrator，当光线 miss 时，也调用 env_light->Le()
        // 但目前先把它当普通光源采样，你会看到物体被照亮，但背景是黑的。
        break;
    }
```


`auto env_light = make_shared<EnvironmentLight>("sky.hdr");`这里，如果不想填写绝对路径，那么把sky.hdr(应该在src文件夹中)复制到build文件夹下（在使用visual studio的情况下，别的情况暂不清楚。）如果填写绝对路径，那么把`"sky.hdr"`换成绝对路径，注意要使用这个斜杠/，避免认成转义字符

效果为
![](/img/环境光.png)

---

# 面光源

在main.cpp中，把`scene_id`设置为18。

效果为
![](/img/面光源.png)
